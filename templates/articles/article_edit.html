{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="author" content="">
	<meta name="keywords" content="">
	<meta name="description" content="">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

	<link rel="stylesheet" type="text/css" href="{% static 'css/normalize.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'icomoon/icomoon.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/vendor.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">

</head>
{% block extra_css %}
<style>
    /* Progress bar styles */
    .progress-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        background-color: #f9f9f9;
        padding: 15px;
        border-radius: 5px;
    }

    .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
        position: relative;
    }

    .step-circle {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #fff;
        border: 2px solid #ccc;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 10px;
        position: relative;
        z-index: 2;
    }

    .step.active .step-circle {
        border-color: #0077b6;
        color: #0077b6;
    }

    .step.completed .step-circle {
        background-color: #0077b6;
        border-color: #0077b6;
        color: #fff;
    }

    .step-number {
        display: block;
        font-size: 14px;
        font-weight: bold;
    }

    .step.completed .step-number {
        display: none;
    }

    .checkmark {
        display: none;
        font-size: 14px;
        font-weight: bold;
    }

    .step.completed .checkmark {
        display: block;
    }

    .step-text {
        font-size: 12px;
        color: #666;
        text-align: center;
    }

    .step.active .step-text {
        color: #0077b6;
        font-weight: bold;
    }

    .step-line {
        flex: 1;
        height: 2px;
        background-color: #ccc;
        position: relative;
        z-index: 1;
    }

    /* Form styles */
    .form-step {
        display: none;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px;
    }

    .form-step.active {
        display: block;
    }

    .view-submissions-btn {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
    }

    .save-later-btn {
        background-color: #fff;
        border: 1px solid #0077b6;
        color: #0077b6;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
    }

    .form-navigation {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
    }

    .back-btn {
        background-color: #0077b6;
        color: white;
        border: 1px solid #ddd;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
    }

    .right-buttons {
        align-items: center;
        gap: 10px;
    }

    #last-saved {
        font-size: 14px;
        color: #666;
    }

    .continue-btn {
        background-color: #0077b6;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
    }

    /* Upload section styles */
    .upload-section {
        display: flex;
        gap: 30px;
    }

    .upload-info {
        flex: 1;
    }

    .upload-area {
        flex: 1;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 20px;
    }

    .file-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 10px;
    }

    .file-name {
        flex: 1;
    }

    .remove-file-btn {
        background-color: #e74c3c;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }

    .add-file-btn {
        background-color: #0077b6;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
    }

    /* Contributors section styles */
    .contributors-section {
        display: flex;
        gap: 30px;
    }

    .contributors-info {
        flex: 1;
    }

    .contributors-area {
        flex: 1;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 20px;
    }

    .contributor-card {
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 20px;
        margin-bottom: 20px;
        position: relative;
    }

    .contributor-info {
        margin-bottom: 10px;
    }

    .contributor-label {
        font-weight: bold;
    }

    .add-contributor-btn {
        background-color: #0077b6;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
    }

    .remove-contributor {
        position: absolute;
        top: 10px;
        right: 10px;
        color: #ff4d4d;
        background: none;
        border: 1px solid #ff4d4d;
        border-radius: 4px;
        padding: 5px 10px;
        cursor: pointer;
        font-weight: bold;
    }

    /* Review page styles */
    .review-section {
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }

    .review-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        background-color: #f9f9f9;
        border-bottom: 1px solid #ddd;
    }

    .review-header h3 {
        margin: 0;
        font-size: 16px;
    }

    .edit-btn {
        background-color: #fff;
        border: 1px solid #0077b6;
        color: #0077b6;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }

    .review-content {
        padding: 15px;
    }

    .review-item {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
    }

    .review-label {
        font-weight: bold;
        margin-bottom: 5px;
        color: #555;
    }

    .review-value {
        color: #333;
    }

    .error-message {
        background-color: #fff0f0;
        border: 1px solid #ff4d4d;
        color: #ff4d4d;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
    }

    /* Modal styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
        background-color: #fff;
        margin: 50px auto;
        width: 80%;
        max-width: 800px;
        border-radius: 4px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #eee;
    }

    .close-modal {
        font-size: 24px;
        cursor: pointer;
    }

    .modal-body {
        padding: 20px;
    }

    .modal-footer {
        padding: 20px;
        border-top: 1px solid #eee;
        text-align: right;
    }

    .save-btn {
        background-color: #0077b6;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
    }

    /* Existing files styles */
    .existing-files {
        margin-bottom: 20px;
    }

    .existing-file-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 10px;
        background-color: #f9f9f9;
    }

    .file-info {
        flex: 1;
    }

    .file-actions {
        display: flex;
        gap: 10px;
    }

    .download-file-btn {
        background-color: #0077b6;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }

    /* Responsive styles */
    @media (max-width: 768px) {
        .header {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .header-buttons {
            margin-top: 10px;
        }
        
        .progress-bar {
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .step-text {
            font-size: 10px;
        }
        
        .upload-section,
        .contributors-section {
            flex-direction: column;
        }
        
        .form-navigation {
            flex-direction: column;
            gap: 15px;
        }
        
        .right-buttons {
            width: 100%;
            justify-content: space-between;
        }
    }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
        }
        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #fff;
            border: 2px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 10px;
            position: relative;
            z-index: 2;
        }
        .step.active .step-circle {
            border-color: #0d6efd;
            color: #0d6efd;
        }
        .step.completed .step-circle {
            background-color: #0d6efd;
            border-color: #0d6efd;
            color: #fff;
        }
        .step-text {
            font-size: 12px;
            color: #666;
        }
        .step.active .step-text {
            color: #0d6efd;
            font-weight: bold;
        }
        .step-line {
            position: absolute;
            top: 15px;
            left: 50%;
            width: 100%;
            height: 2px;
            background-color: #ccc;
            z-index: 1;
        }
        .step:last-child .step-line {
            display: none;
        }
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
</style>
{% endblock %}

<body data-bs-spy="scroll" data-bs-target="#header" tabindex="0">

	<div id="header-wrap">


		{% include "header.html" %}


    </div><!--header-wrap-->

    <section class="py-5 my-=0">
        <div class="container">
            <div class="header">
                <h1>{% trans "Maqola yaratish:" %} <span id="current-step-title">{% trans "Tafsilotlar" %}</span></h1>
                <div class="header-buttons">
                    <a href="{% url 'profile' %}?tab=business" class="save-later-btn">{% trans "Mening maqolalarim" %}</a>
                    <button id="save-later-top" class="save-later-btn">{% trans "Keyinroq saqlash" %}</button>
                </div>
            </div>

            <div class="progress-bar" style="display: flex; flex-direction: row;">
                <div class="step active" data-step="1">
                    <div class="step-circle">
                        <span class="checkmark">âœ“</span>
                        <span class="step-number">1</span>
                    </div>
                    <div class="step-text">{% trans "Tafsilotlar" %}</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">
                        <span class="checkmark">âœ“</span>
                        <span class="step-number">2</span>
                    </div>
                    <div class="step-text">{% trans "Fayllar" %}</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">
                        <span class="checkmark">âœ“</span>
                        <span class="step-number">3</span>
                    </div>
                    <div class="step-text">{% trans "Mualliflar" %}</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">
                        <span class="checkmark">âœ“</span>
                        <span class="step-number">4</span>
                    </div>
                    <div class="step-text">{% trans "Tahrirchilar uchun" %}</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">
                        <span class="checkmark">âœ“</span>
                        <span class="step-number">5</span>
                    </div>
                    <div class="step-text">{% trans "Koâ€˜rib chiqish" %}</div>
                </div>
            </div>

            <form method="post" enctype="multipart/form-data" id="article-form">
                {% csrf_token %}
                
                <div class="form-container">
                    <!-- Ð¨Ð°Ð³ 1: Ð”ÐµÑ‚Ð°Ð»Ð¸ -->
                    <div class="form-step active" id="step-1">
                        <h2>{% trans "Tafsilotlar" %}</h2>
                        
                        {% if not conference %}
                        <div class="form-group">
                            <label for="id_conference">{% trans "Konferensiya*" %}</label>
                            <select name="conference" id="id_conference" class="form-control">
                                <option value="">{% trans "-- Konferensiyani tanlang --" %}</option>
                                {% for conference in article_form.fields.conference.queryset %}
                                    <option value="{{ conference.id }}">{{ conference.title }}</option>
                                {% endfor %}
                            </select>
                            {% if article_form.conference.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.conference.errors }}</div>
                            {% endif %}
                            <div class="form-text">{% trans "Maqola topshirishni xohlagan konferensiyani tanlang." %}</div>
                        </div>
                        
                        <div id="conference_detail_link" class="mt-2">
                            <a href="#" id="detail_link" class="btn btn-info" style="display: none;">{% trans "Konferensiya haqida â†’" %}</a>
                        </div>
                        
                        <script>
                            document.getElementById('id_conference').addEventListener('change', function() {
                                let selectedOption = this.options[this.selectedIndex];
                                let conferenceId = selectedOption.value;
                                let detailLink = document.getElementById('detail_link');
                                
                                if (conferenceId) {
                                    detailLink.href = "/conferences/" + conferenceId + "/";
                                    detailLink.style.display = "inline-block";
                                } else {
                                    detailLink.style.display = "none";
                                }
                            });
                        </script>
                        {% else %}
                            <input type="hidden" name="conference" value="{{ conference.id }}">
                            <div class="form-group">
                                <label>{% trans "Konferensiya" %}</label>
                                <p>{{ conference.title }}</p>
                            </div>
                        {% endif %}
                        
                        <div class="form-group">
                            <label for="id_title">{% trans "Sarlavha*" %}</label>
                            {{ article_form.title }}
                            {% if article_form.title.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.title.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="id_abstract">{% trans "Annotatsiya*" %}</label>
                            {{ article_form.abstract }}
                            {% if article_form.abstract.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.abstract.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="id_keywords">{% trans "Kalit soâ€˜zlar (vergul bilan ajratilgan)" %}</label>
                            {{ article_form.keywords }}
                            {% if article_form.keywords.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.keywords.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="id_references">{% trans "Havolalar" %}</label>
                            {{ article_form.references }}
                            {% if article_form.references.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.references.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 form-group">
                                <label for="id_start_date">{% trans "Boshlanish sanasi*" %}</label>
                                {{ article_form.start_date }}
                                {% if article_form.start_date.errors %}
                                    <div class="invalid-feedback d-block">{{ article_form.start_date.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 form-group">
                                <label for="id_end_date">{% trans "Tugash sanasi" %}</label>
                                {{ article_form.end_date }}
                                {% if article_form.end_date.errors %}
                                    <div class="invalid-feedback d-block">{{ article_form.end_date.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ð¨Ð°Ð³ 2: Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² -->
                    <div class="form-step" id="step-2">
                        <div class="upload-section">
                            <div class="upload-info">
                                <h2>{% trans "Fayllarni yuklash" %}</h2>
                                <p>{% trans "Maqolangiz bilan bogâ€˜liq fayllarni yuklang. Siz maqola matnini, maâ€™lumotlarni, rasmlarni va tahrirchilarga ishni baholashda yordam beradigan boshqa materiallarni yuklashingiz mumkin." %}</p>
                            </div>
                            <div class="upload-area">
                                <h3>{% trans "Fayllar" %}</h3>
                                
                                <!-- Ð¡ÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ (Ð¿Ñ€Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸) -->
                                {% if article.files.all %}
                                <div class="existing-files">
                                    <h4>{% trans "Yuklangan fayllar" %}</h4>
                                    {% for article_file in article.files.all %}
                                    <div class="existing-file-item" id="existing-file-{{ article_file.id }}">
                                        <div class="file-info">
                                            <strong>{{ article_file.file.name|slice:"7:" }}</strong>
                                            {% if article_file.description %}
                                            <p>{{ article_file.description }}</p>
                                            {% endif %}
                                            <small>{% trans "Turi:" %} {{ article_file.get_file_type_display }}</small>
                                        </div>
                                        <div class="file-actions">
                                            <a href="{{ article_file.file.url }}" class="download-file-btn" style="align-items: center; justify-content: center;" target="_blank">{% trans "Yuklab olish" %}</a>
                                            <button type="button" class="remove-file-btn" data-file-id="{{ article_file.id }}">{% trans "Oâ€˜chirish" %}</button>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                
                                <div id="file-list">
                                    <!-- Fayllar shu yerda koâ€˜rsatiladi -->
                                </div>
                                <input type="file" name="files" id="id_files" style="display: none;" multiple>
                                <button type="button" id="add-file-btn" class="add-file-btn">{% trans "Fayl qoâ€˜shish" %}</button>
                                
                                <!-- Oâ€˜chirilgan fayllar IDlarini saqlash uchun yashirin maydon -->
                                <input type="hidden" name="deleted_files" id="deleted_files" value="">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ð¨Ð°Ð³ 3: ÐÐ²Ñ‚Ð¾Ñ€Ñ‹ -->
                    <div class="form-step" id="step-3">
                        <div class="contributors-section">
                            <div class="contributors-info">
                                <h2>{% trans "Mualliflar" %}</h2>
                                <p>{% trans "Ushbu maqolaga katta hissa qoâ€˜shgan barcha mualliflarni qoâ€˜shing. Agar muallif koâ€˜rsatilmagan boâ€˜lsa, yuboruvchi ular nomidan maqola uchun toâ€˜liq javobgarlikni oâ€˜z zimmasiga oladi. Barcha mualliflar maqola yuborilishiga va ular muallif sifatida koâ€˜rsatilganiga rozilik berishlari kerak." %}</p>
                            </div>
                            <div class="contributors-area">
                                <div id="contributors-list">
                                    <!-- Mualliflar shu yerda koâ€˜rsatiladi -->
                                </div>
                                <button type="button" id="add-contributor-btn" class="add-contributor-btn">{% trans "Muallif qoâ€˜shish" %}</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ð¨Ð°Ð³ 4: Ð”Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð¾Ð² -->
                    <div class="form-step" id="step-4">
                        <h2>{% trans "Tahrirchilar uchun" %}</h2>
                        <div class="form-group">
                            <label for="id_cover_letter">{% trans "Mavzu" %}</label>
                            <p>{% trans "Maqolangiz mavzusini tasvirlaydigan kalit soâ€˜zlar, iboralar yoki tasnif kodlarini koâ€˜rsating." %}</p>
                            {{ article_form.cover_letter }}
                            {% if article_form.cover_letter.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.cover_letter.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="id_special_instructions">{% trans "Tahrirchi uchun izohlar" %}</label>
                            <p>{% trans "Maqolangizni baholashda tahrirchilar bilishi kerak deb hisoblagan har qanday maâ€™lumotni qoâ€˜shing." %}</p>
                            {{ article_form.special_instructions }}
                            {% if article_form.special_instructions.errors %}
                                <div class="invalid-feedback d-block">{{ article_form.special_instructions.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Ð¨Ð°Ð³ 5: ÐžÐ±Ð·Ð¾Ñ€ -->
                    <div class="form-step" id="step-5">
                        <h2>{% trans "Koâ€˜rib chiqish va yuborish" %}</h2>
                        <p class="review-intro">
                            {% trans "Bu yuborishni yakunlashdan oldin kiritgan maâ€™lumotlaringizning qisqacha koâ€˜rinishi. Bu yerda koâ€˜rsatilgan har qanday tafsilotni har bir boâ€˜limning yuqori qismidagi 'Tahrirlash' tugmasini bosish orqali oâ€˜zgartirishingiz mumkin." %}
                        </p>
                        <p class="review-intro">
                            {% trans "Yuborish tugallangandan soâ€˜ng, bizning tahririyat jamoamiz aâ€™zolaridan biri uni koâ€˜rib chiqish uchun tayinlanadi. Iltimos, kiritgan maâ€™lumotlaringiz iloji boricha aniq ekanligiga ishonch hosil qiling." %}
                        </p>

                        <div id="review-errors" class="error-message" style="display: none;">
                            <span class="error-icon">âš </span> {% trans "Yuborishdan oldin tuzatilishi kerak boâ€˜lgan bir yoki bir nechta muammolar mavjud. Iltimos, quyidagi maâ€™lumotlarni koâ€˜rib chiqing va soâ€˜ralgan oâ€˜zgartirishlarni kiriting." %}
                        </div>

                        <div class="review-section">
                            <div class="review-header">
                                <h3>{% trans "Tafsilotlar" %}</h3>
                                <button type="button" class="edit-btn" data-section="1">{% trans "Tahrirlash" %}</button>
                            </div>
                            <div class="review-content" id="review-details">
                                <!-- JavaScript bilan toâ€˜ldiriladi -->
                            </div>
                        </div>

                        <div class="review-section">
                            <div class="review-header">
                                <h3>{% trans "Fayllar" %}</h3>
                                <button type="button" class="edit-btn" data-section="2">{% trans "Tahrirlash" %}</button>
                            </div>
                            <div class="review-content" id="review-files">
                                <!-- JavaScript bilan toâ€˜ldiriladi -->
                            </div>
                        </div>

                        <div class="review-section">
                            <div class="review-header">
                                <h3>{% trans "Mualliflar" %}</h3>
                                <button type="button" class="edit-btn" data-section="3">{% trans "Tahrirlash" %}</button>
                            </div>
                            <div class="review-content" id="review-contributors">
                                <!-- JavaScript bilan toâ€˜ldiriladi -->
                            </div>
                        </div>

                        <div class="review-section">
                            <div class="review-header">
                                <h3>{% trans "Tahrirchilar uchun" %}</h3>
                                <button type="button" class="edit-btn" data-section="4">{% trans "Tahrirlash" %}</button>
                            </div>
                            <div class="review-content" id="review-editors">
                                <!-- JavaScript bilan toâ€˜ldiriladi -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" id="back-btn" class="back-btn">{% trans "Orqaga" %}</button>
                    <div class="right-buttons">
                        <span id="last-saved">{% trans "Oxirgi saqlash: Hech qachon" %}</span>
                        <button type="button" id="save-later-bottom" class="save-later-btn">{% trans "Keyinroq saqlash" %}</button>
                        <button type="button" id="continue-btn" class="continue-btn">{% trans "Davom etish" %}</button>
                        <button type="submit" id="submit-btn" style="display: none;">{% trans "Yuborish" %}</button>
                    </div>
                </div>
            </form>
        </div>
    </section>

<!-- ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾ Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð° -->
    <section class="py-5 my-=0">
        <div id="contributor-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>{% trans "Muallif qoâ€˜shish" %}</h2>
                    <span class="close-modal">Ã—</span>
                </div>
                <div class="modal-body">
                    <form id="contributor-form">
                        <div class="form-group">
                            <label for="given-name">{% trans "Ism" %} <span class="required">*</span></label>
                            <input type="text" id="given-name" name="given-name" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="family-name">{% trans "Familiya" %}</label>
                            <input type="text" id="family-name" name="family-name" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="preferred-name">{% trans "Afzal ism" %}</label>
                            <p class="field-description">{% trans "Muallif nashr qilingan ishda koâ€˜rsatilishi kerak boâ€˜lgan toâ€˜liq ismini kiriting. Masalan: Prof. Ivan P. Sidorov" %}</p>
                            <input type="text" id="preferred-name" name="preferred-name" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="contributor-email">{% trans "Email" %} <span class="required">*</span></label>
                            <input type="email" id="contributor-email" name="contributor-email" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="country">{% trans "Davlat" %} <span class="required">*</span></label>
                            <select id="country" name="country" class="form-control" required>
                                <option value="">{% trans "Davlatni tanlang" %}</option>
                                <option value="RU">{% trans "Rossiya" %}</option>
                                <option value="UZ">{% trans "Oâ€˜zbekiston" %}</option>
                                <option value="KZ">{% trans "Qozogâ€˜iston" %}</option>
                                <option value="US">{% trans "AQSh" %}</option>
                                <option value="GB">{% trans "Buyuk Britaniya" %}</option>
                                <!-- Qoâ€˜shimcha davlatlarni kerak boâ€˜lsa qoâ€˜shing -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="homepage">{% trans "Shaxsiy sahifa URL" %}</label>
                            <input type="url" id="homepage" name="homepage" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="orcid">{% trans "ORCID ID" %}</label>
                            <input type="text" id="orcid" name="orcid" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="bio">{% trans "Biografiya (masalan, kafedra va lavozim)" %}</label>
                            <div class="text-editor-toolbar">
                                <button type="button" class="toolbar-btn bold-btn">B</button>
                                <button type="button" class="toolbar-btn italic-btn">I</button>
                                <button type="button" class="toolbar-btn superscript-btn">xÂ²</button>
                                <button type="button" class="toolbar-btn subscript-btn">xâ‚‚</button>
                                <button type="button" class="toolbar-btn link-btn">ðŸ”—</button>
                            </div>
                            <textarea id="bio" name="bio" rows="5" class="form-control"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="affiliation">{% trans "Tashkilot (muassasa)" %}</label>
                            <input type="text" id="affiliation" name="affiliation" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>{% trans "Muallifning roli" %}</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="role" value="author" checked> {% trans "Muallif" %}
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="role" value="translator"> {% trans "Tarjimon" %}
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>{% trans "Nashrlar roâ€˜yxati" %}</label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="include-in-lists" name="include-in-lists" checked>
                                {% trans "Ushbu muallifni nashrlar roâ€˜yxatida mualliflar identifikatsiyasida kiritish." %}
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" id="save-contributor-btn" class="save-btn">{% trans "Saqlash" %}</button>
                </div>
            </div>
        </div>
    </section>

{% block extra_js %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // DOM ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹
        const steps = document.querySelectorAll(".step");
        const formSteps = document.querySelectorAll(".form-step");
        const backBtn = document.getElementById("back-btn");
        const continueBtn = document.getElementById("continue-btn");
        const submitBtn = document.getElementById("submit-btn");
        const saveLaterBtns = document.querySelectorAll(".save-later-btn");
        const addFileBtn = document.getElementById("add-file-btn");
        const fileInput = document.getElementById("id_files");
        const fileList = document.getElementById("file-list");
        const addContributorBtn = document.getElementById("add-contributor-btn");
        const contributorsList = document.getElementById("contributors-list");
        const currentStepTitle = document.getElementById("current-step-title");
        const lastSavedSpan = document.getElementById("last-saved");
        const articleForm = document.getElementById("article-form");
        const deletedFilesInput = document.getElementById("deleted_files");

        // Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¾Ð±Ð·Ð¾Ñ€Ð°
        const reviewDetailsSection = document.getElementById("review-details");
        const reviewFilesSection = document.getElementById("review-files");
        const reviewContributorsSection = document.getElementById("review-contributors");
        const reviewEditorsSection = document.getElementById("review-editors");
        const reviewErrorsSection = document.getElementById("review-errors");
        const editButtons = document.querySelectorAll(".edit-btn");

        // Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
        const contributorModal = document.getElementById("contributor-modal");
        const closeModal = document.querySelector(".close-modal");
        const saveContributorBtn = document.getElementById("save-contributor-btn");
        const contributorForm = document.getElementById("contributor-form");

        // Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑˆÐ°Ð³
        let currentStep = 1;

        // Ð˜Ð½Ð´ÐµÐºÑ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð° Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ (null Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð°)
        let currentContributorIndex = null;

        // ÐœÐ°ÑÑÐ¸Ð² Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ID ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
        let deletedFiles = [];

        // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹
        let formData = {
            id: Date.now(), // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ID Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸
            currentStep: 1,
            completedSteps: [],
            lastSaved: null,
            details: {
                conference: "{{ conference.id }}" || "",
                title: "",
                abstract: "",
                keywords: "",
                references: "",
                startDate: "",
                endDate: ""
            },
            files: [],
            contributors: [],
            editors: {
                coverLetter: "",
                specialInstructions: ""
            }
        };

        // Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…, ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚
        loadFormData();

        // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ UI Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
        updateUI();

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
        backBtn.addEventListener("click", goToPreviousStep);
        continueBtn.addEventListener("click", goToNextStep);

        saveLaterBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                saveFormData(true);
            });
        });

        addFileBtn.addEventListener("click", () => {
            fileInput.click();
        });

        fileInput.addEventListener("change", handleFileSelection);

        addContributorBtn.addEventListener("click", () => {
            openContributorModal();
        });

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
        document.querySelectorAll('.remove-file-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const fileId = this.getAttribute('data-file-id');
                if (confirm("{% trans 'Haqiqatan ham bu faylni oÊ»chirib tashlamoqchimisiz?' %}")) {
                    // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ID Ñ„Ð°Ð¹Ð»Ð° Ð² Ð¼Ð°ÑÑÐ¸Ð² ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
                    deletedFiles.push(fileId);
                    deletedFilesInput.value = deletedFiles.join(',');
                    
                    // Ð¡ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ñ„Ð°Ð¹Ð»Ð° Ð² UI
                    document.getElementById(`existing-file-${fileId}`).style.display = 'none';
                }
            });
        });

        // ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ Ð¾Ð±Ð·Ð¾Ñ€Ð°
        editButtons.forEach((btn) => {
            btn.addEventListener("click", function() {
                const sectionIndex = parseInt(this.getAttribute("data-section"));
                goToStep(sectionIndex);
            });
        });

        // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
        closeModal.addEventListener("click", closeContributorModal);

        saveContributorBtn.addEventListener("click", (e) => {
            e.preventDefault();
            saveContributor();
        });

        // Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð° Ð¿Ñ€Ð¸ ÐºÐ»Ð¸ÐºÐµ Ð²Ð½Ðµ ÐµÐ³Ð¾
        window.addEventListener("click", (event) => {
            if (event.target === contributorModal) {
                closeContributorModal();
            }
        });

        // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð²Ð²Ð¾Ð´Ð° Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÐµÐ¹ Ñ„Ð¾Ñ€Ð¼Ñ‹
        document.querySelectorAll("input, textarea, select").forEach((input) => {
            input.addEventListener("input", () => {
                updateFormData();
            });
        });

        // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸
        function updateUI() {
            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð¾Ð² ÑˆÐ°Ð³Ð¾Ð²
            steps.forEach((step, index) => {
                const stepNumber = index + 1;
                if (stepNumber < currentStep) {
                    step.classList.add("completed");
                    step.classList.remove("active");
                } else if (stepNumber === currentStep) {
                    step.classList.add("active");
                    step.classList.remove("completed");
                } else {
                    step.classList.remove("active", "completed");
                }
            });

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²Ð¸Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ ÑˆÐ°Ð³Ð¾Ð² Ñ„Ð¾Ñ€Ð¼Ñ‹
            formSteps.forEach((formStep, index) => {
                const stepNumber = index + 1;
                if (stepNumber === currentStep) {
                    formStep.classList.add("active");
                } else {
                    formStep.classList.remove("active");
                }
            });

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° ÑˆÐ°Ð³Ð°
            const stepTitles = ["Tafsilotlar", "Fayllarni yuklash", "Mualliflar", "Muharrirlar uchun", "Umumiy ko'rinish"];
            currentStepTitle.textContent = stepTitles[currentStep - 1];

            continueBtn.textContent = currentStep === 5 ? "{% trans 'Yuborish' %}" : "{% trans 'Davom etish' %}";
            backBtn.style.visibility = currentStep === 1 ? "hidden" : "visible";

            // Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÐµÐ¹ Ñ„Ð¾Ñ€Ð¼Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸
            populateFormFields();

            // Ð•ÑÐ»Ð¸ Ð½Ð° ÑˆÐ°Ð³Ðµ Ð¾Ð±Ð·Ð¾Ñ€Ð°, Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð¾Ð±Ð·Ð¾Ñ€Ð°
            if (currentStep === 5) {
                generateReviewContent();
            }

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
            if (formData.lastSaved) {
                lastSavedSpan.textContent = `Oxirgi saqlangan: ${formData.lastSaved}`;
            }
        }

        function populateFormFields() {
            // Ð”ÐµÑ‚Ð°Ð»Ð¸
            if (document.getElementById("id_conference")) {
                document.getElementById("id_conference").value = formData.details.conference || "";
            }
            document.getElementById("id_title").value = formData.details.title || "";
            document.getElementById("id_abstract").value = formData.details.abstract || "";
            document.getElementById("id_keywords").value = formData.details.keywords || "";
            document.getElementById("id_references").value = formData.details.references || "";
            document.getElementById("id_start_date").value = formData.details.startDate || "";
            document.getElementById("id_end_date").value = formData.details.endDate || "";

            // Ð¤Ð°Ð¹Ð»Ñ‹
            renderFileList();

            // ÐÐ²Ñ‚Ð¾Ñ€Ñ‹
            renderContributorsList();

            // Ð”Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð¾Ð²
            document.getElementById("id_cover_letter").value = formData.editors.coverLetter || "";
            document.getElementById("id_special_instructions").value = formData.editors.specialInstructions || "";
        }

        function renderFileList() {
            fileList.innerHTML = "";
            if (!formData.files || formData.files.length === 0) {
                const emptyMessage = document.createElement("p");
                emptyMessage.textContent = "{% trans 'Yangi fayllar hali yuklanmagan.' %}";
                fileList.appendChild(emptyMessage);
            } else {
                formData.files.forEach((file, index) => {
                    const fileItem = document.createElement("div");
                    fileItem.className = "file-item";

                    const fileName = document.createElement("span");
                    fileName.className = "file-name";
                    fileName.textContent = file.name;
                    fileItem.appendChild(fileName);

                    const removeButton = document.createElement("button");
                    removeButton.type = "button";
                    removeButton.textContent = "{% trans 'OÊ»chirish' %}";
                    removeButton.className = "remove-file-btn";
                    removeButton.dataset.index = index;
                    removeButton.addEventListener("click", function() {
                        removeFile(parseInt(this.dataset.index));
                    });
                    fileItem.appendChild(removeButton);

                    fileList.appendChild(fileItem);
                });
            }
        }
        function handleFileSelection() {
            if (this.files.length > 0) {
                for (let i = 0; i < this.files.length; i++) {
                    const file = this.files[i];
                    if (!formData.files) formData.files = [];
                    formData.files.push({
                        name: file.name,
                        size: file.size,
                        type: file.type,
                        file: file // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¾Ð±ÑŠÐµÐºÑ‚ Ñ„Ð°Ð¹Ð»Ð° Ð´Ð»Ñ Ð¿Ð¾ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸
                    });
                }
                renderFileList();
                saveFormData(false);
            }
        }

        function removeFile(index) {
            formData.files.splice(index, 1);
            renderFileList();
            saveFormData(false);
        }

        function renderContributorsList() {
            contributorsList.innerHTML = "";
            if (!formData.contributors || formData.contributors.length === 0) {
                const emptyMessage = document.createElement("p");
                emptyMessage.textContent = "{% trans 'Mualliflar hali qoshilmagan. Muallifni qoshish uchun Muallif qoshish tugmasini bosing.' %}";
                contributorsList.appendChild(emptyMessage);
            } else {
                formData.contributors.forEach((contributor, index) => {
                    const contributorCard = document.createElement("div");
                    contributorCard.className = "contributor-card";

                    const name = contributor.givenName + (contributor.familyName ? " " + contributor.familyName : "");
                    const displayName = contributor.preferredName || name;

                    const heading = document.createElement("h3");
                    heading.textContent = index === 0 ? "{% trans 'Bosh muallif' %}: " + displayName : displayName;

                    const removeBtn = document.createElement("button");
                    removeBtn.type = "button";
                    removeBtn.className = "remove-contributor";
                    removeBtn.textContent = "{% trans 'OÊ»chirish' %}";
                    removeBtn.dataset.index = index;
                    removeBtn.addEventListener("click", function() {
                        removeContributor(parseInt(this.dataset.index));
                    });

                    const emailInfo = document.createElement("div");
                    emailInfo.className = "contributor-info";
                    emailInfo.innerHTML = '<span class="contributor-label">{% trans "Email" %}:</span> ' + contributor.email;

                    const affiliationInfo = document.createElement("div");
                    affiliationInfo.className = "contributor-info";
                    affiliationInfo.innerHTML = '<span class="contributor-label">{% trans "Tashkilot" %}:</span> ' + (contributor.affiliation || "{% trans 'Belgilanmagan' %}");

                    const roleInfo = document.createElement("div");
                    roleInfo.className = "contributor-info";
                    roleInfo.innerHTML = '<span class="contributor-label">{% trans "Rol" %}:</span> ' + (contributor.role === "translator" ? "{% trans 'Tarjimon' %}" : "{% trans 'Muallif' %}");

                    const editBtn = document.createElement("button");
                    editBtn.type = "button";
                    editBtn.className = "edit-contributor-btn";
                    editBtn.textContent = "{% trans 'Tahrirlash' %}";
                    editBtn.dataset.index = index;
                    editBtn.addEventListener("click", function() {
                        editContributor(parseInt(this.dataset.index));
                    });

                    contributorCard.appendChild(heading);
                    contributorCard.appendChild(removeBtn);
                    contributorCard.appendChild(emailInfo);
                    contributorCard.appendChild(affiliationInfo);
                    contributorCard.appendChild(roleInfo);
                    contributorCard.appendChild(editBtn);

                    contributorsList.appendChild(contributorCard);
                });
            }
        }

        function openContributorModal(index = null) {
            currentContributorIndex = index;

            // ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð¿Ð¾Ð»ÐµÐ¹ Ñ„Ð¾Ñ€Ð¼Ñ‹
            document.getElementById("given-name").value = "";
            document.getElementById("family-name").value = "";
            document.getElementById("preferred-name").value = "";
            document.getElementById("contributor-email").value = "";
            document.getElementById("country").value = "";
            document.getElementById("homepage").value = "";
            document.getElementById("orcid").value = "";
            document.getElementById("bio").value = "";
            document.getElementById("affiliation").value = "";
            document.querySelector('input[name="role"][value="author"]').checked = true;
            document.getElementById("include-in-lists").checked = true;

            // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð°, Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð¿Ð¾Ð»Ñ
            if (index !== null && formData.contributors && formData.contributors[index]) {
                const contributor = formData.contributors[index];
                document.getElementById("given-name").value = contributor.givenName || "";
                document.getElementById("family-name").value = contributor.familyName || "";
                document.getElementById("preferred-name").value = contributor.preferredName || "";
                document.getElementById("contributor-email").value = contributor.email || "";
                document.getElementById("country").value = contributor.country || "";
                document.getElementById("homepage").value = contributor.homepage || "";
                document.getElementById("orcid").value = contributor.orcid || "";
                document.getElementById("bio").value = contributor.bio || "";
                document.getElementById("affiliation").value = contributor.affiliation || "";

                if (contributor.role === "translator") {
                    document.querySelector('input[name="role"][value="translator"]').checked = true;
                } else {
                    document.querySelector('input[name="role"][value="author"]').checked = true;
                }

                document.getElementById("include-in-lists").checked = contributor.includeInLists !== false;
            }

            // ÐŸÐ¾ÐºÐ°Ð· Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
            contributorModal.style.display = "block";
        }

        function closeContributorModal() {
            contributorModal.style.display = "none";
            currentContributorIndex = null;
        }

        function saveContributor() {
            // Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ð¾Ð»ÐµÐ¹
            const givenName = document.getElementById("given-name").value.trim();
            const email = document.getElementById("contributor-email").value.trim();
            const country = document.getElementById("country").value;

            if (!givenName) {
                alert("{% trans 'Ism talab qilinadi.' %}");
                return;
            }

            if (!email) {
                alert("{% trans 'Elektron pochta kerak.' %}");
                return;
            }

            if (!validateEmail(email)) {
                alert("{% trans 'Yaroqli elektron pochta manzilini kiriting.' %}");
                return;
            }

            if (!country) {
                alert("{% trans 'Mamlakat talab qilinadi.' %}");
                return;
            }

            // Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ð°
            const contributor = {
                givenName: givenName,
                familyName: document.getElementById("family-name").value.trim(),
                preferredName: document.getElementById("preferred-name").value.trim(),
                email: email,
                country: country,
                homepage: document.getElementById("homepage").value.trim(),
                orcid: document.getElementById("orcid").value.trim(),
                bio: document.getElementById("bio").value.trim(),
                affiliation: document.getElementById("affiliation").value.trim(),
                role: document.querySelector('input[name="role"]:checked').value,
                includeInLists: document.getElementById("include-in-lists").checked
            };

            // Ð£Ð±ÐµÐ´Ð¸Ð¼ÑÑ, Ñ‡Ñ‚Ð¾ Ð¼Ð°ÑÑÐ¸Ð² Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚
            if (!formData.contributors) {
                formData.contributors = [];
            }

            // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð»Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð°
            if (currentContributorIndex !== null) {
                formData.contributors[currentContributorIndex] = contributor;
            } else {
                formData.contributors.push(contributor);
            }

            // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹
            saveFormData(false);

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ UI
            renderContributorsList();

            // Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°
            closeContributorModal();

            // ÐŸÐ¾ÐºÐ°Ð· Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ
            alert("{% trans 'Muallif muvaffaqiyatli saqlandi!' %}");
        }

        function editContributor(index) {
            openContributorModal(index);
        }

        function removeContributor(index) {
            if (confirm("{% trans 'Haqiqatan ham bu muallifni olib tashlamoqchimisiz?' %}")) {
                formData.contributors.splice(index, 1);
                renderContributorsList();
                saveFormData(false);
            }
        }

        function generateReviewContent() {
            reviewDetailsSection.innerHTML = "";
            if (!formData.details.title) {
                addReviewError(reviewDetailsSection, "{% trans 'Sarlavha kerak.' %}");
                hasErrors = true;
            } else {
                addReviewItem(reviewDetailsSection, "{% trans 'Sarlavha' %}", formData.details.title);
            }

            if (!formData.details.abstract) {
                addReviewError(reviewDetailsSection, "{% trans 'Bu maydon shart.' %}", "{% trans 'Izoh' %}");
                hasErrors = true;
            } else {
                addReviewItem(reviewDetailsSection, "{% trans 'Izoh' %}", formData.details.abstract);
            }

            if (!formData.details.keywords) {
                addReviewItem(reviewDetailsSection, "{% trans 'Kalit sozlar' %}", "{% trans 'belgilanmagan' %}");
            } else {
                addReviewItem(reviewDetailsSection, "{% trans 'Kalit sozlar' %}", formData.details.keywords);
            }
            addReviewItem(reviewDetailsSection, "{% trans 'Ssilka' %}", formData.details.references || "{% trans 'belgilanmagan' %}");
            addReviewItem(reviewDetailsSection, "{% trans 'boshlanish sanasi' %}", formData.details.startDate || "{% trans 'Belgilanmagan' %}");
            addReviewItem(reviewDetailsSection, "{% trans 'Tugash sanasi' %}", formData.details.endDate || "{% trans 'Belgilanmagan' %}");

            // Ð Ð°Ð·Ð´ÐµÐ» Ñ„Ð°Ð¹Ð»Ð¾Ð²
            reviewFilesSection.innerHTML = "";

            // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÐºÐ°Ðº ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹, Ñ‚Ð°Ðº Ð¸ Ð½Ð¾Ð²Ñ‹Ðµ
            const hasExistingFiles = document.querySelectorAll('.existing-file-item').length > 0;
            const hasNewFiles = formData.files && formData.files.length > 0;

            if (!hasExistingFiles && !hasNewFiles) {
                addReviewError(reviewFilesSection, "{% trans 'Siz kamida bitta maqola faylini yuklashingiz kerak.' %}");
                hasErrors = true;
            } else {
                // Ð¡ÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
                if (hasExistingFiles) {
                    const existingFilesList = document.createElement("div");
                    existingFilesList.className = "review-item";
                    
                    const existingFilesLabel = document.createElement("div");
                    existingFilesLabel.className = "review-label";
                    existingFilesLabel.textContent = "{% trans 'Mavjud fayllar' %}";
                    
                    const existingFilesValue = document.createElement("div");
                    existingFilesValue.className = "review-value";
                    
                    const filesList = document.createElement("ul");
                    document.querySelectorAll('.existing-file-item').forEach(fileItem => {
                        if (fileItem.style.display !== 'none') { // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ð½Ðµ Ð±Ñ‹Ð» Ð»Ð¸ Ñ„Ð°Ð¹Ð» ÑƒÐ´Ð°Ð»ÐµÐ½
                            const fileName = fileItem.querySelector('.file-info strong').textContent;
                            const li = document.createElement("li");
                            li.textContent = fileName;
                            filesList.appendChild(li);
                        }
                    });
                    
                    existingFilesValue.appendChild(filesList);
                    existingFilesList.appendChild(existingFilesLabel);
                    existingFilesList.appendChild(existingFilesValue);
                    reviewFilesSection.appendChild(existingFilesList);
                }
                
                // ÐÐ¾Ð²Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
                if (hasNewFiles) {
                    const newFilesList = document.createElement("div");
                    newFilesList.className = "review-item";
                    
                    const newFilesLabel = document.createElement("div");
                    newFilesLabel.className = "review-label";
                    newFilesLabel.textContent ="{% trans 'Yangi fayllar' %}";
                    
                    const newFilesValue = document.createElement("div");
                    newFilesValue.className = "review-value";
                    
                    const filesList = document.createElement("ul");
                    formData.files.forEach(file => {
                        const li = document.createElement("li");
                        li.textContent = file.name;
                        filesList.appendChild(li);
                    });
                    
                    newFilesValue.appendChild(filesList);
                    newFilesList.appendChild(newFilesLabel);
                    newFilesList.appendChild(newFilesValue);
                    reviewFilesSection.appendChild(newFilesList);
                }
            }

            // Ð Ð°Ð·Ð´ÐµÐ» Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð²
            reviewContributorsSection.innerHTML = "";

            if (!formData.contributors || formData.contributors.length === 0) {
                addReviewError(reviewContributorsSection,"{% trans 'Ushbu maqola uchun mualliflar qoshilmagan.' %}");
                hasErrors = true;
            } else {
                formData.contributors.forEach((contributor, index) => {
                    const contributorTitle = index === 0 ? "{% trans 'Birlamchi muallif' %}" : `{% trans "Qo'shimcha muallif" %} ${index}`;
                    const name = contributor.givenName + (contributor.familyName ? " " + contributor.familyName : "");
                    const displayName = contributor.preferredName || name;

                    const contributorItem = document.createElement("div");
                    contributorItem.className = "review-item";

                    const contributorLabel = document.createElement("div");
                    contributorLabel.className = "review-label";
                    contributorLabel.textContent = contributorTitle;

                    const contributorValue = document.createElement("div");
                    contributorValue.className = "review-value";

                    const contributorDetails = document.createElement("p");
                    contributorDetails.innerHTML = `
                        <strong>Ism:</strong> ${displayName}<br>
                        <strong>Email:</strong> ${contributor.email}<br>
                        <strong>Tashkilot:</strong> ${contributor.affiliation || "Belgilanmagan"}<br>
                        <strong>Rol:</strong> ${contributor.role === "translator" ? "Tarjimon" : "Muallif"}
                    `;

                    contributorValue.appendChild(contributorDetails);
                    contributorItem.appendChild(contributorLabel);
                    contributorItem.appendChild(contributorValue);
                    reviewContributorsSection.appendChild(contributorItem);
                });
            }

            // Ð Ð°Ð·Ð´ÐµÐ» Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð¾Ð²
            reviewEditorsSection.innerHTML = "";

            addReviewItem(reviewEditorsSection, "{% trans 'Mavzu' %}", formData.editors.coverLetter || "{% trans 'Belgilanmagan' %}");
            addReviewItem(reviewEditorsSection, "{% trans 'Muharrir uchun sharhlar' %}", formData.editors.specialInstructions || "{% trans 'belgilanmagan' %}");

            // ÐŸÐ¾ÐºÐ°Ð·/ÑÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
            if (hasErrors) {
                reviewErrorsSection.style.display = "block";
            } else {
                reviewErrorsSection.style.display = "none";
            }
        }

        function addReviewItem(parent, label, value) {
            const item = document.createElement("div");
            item.className = "review-item";

            const labelDiv = document.createElement("div");
            labelDiv.className = "review-label";
            labelDiv.textContent = label;

            const valueDiv = document.createElement("div");
            valueDiv.className = "review-value";
            valueDiv.textContent = value;

            item.appendChild(labelDiv);
            item.appendChild(valueDiv);
            parent.appendChild(item);
        }

        function addReviewError(parent, message, label = null) {
            if (label) {
                // ÐžÑˆÐ¸Ð±ÐºÐ° Ð´Ð»Ñ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»Ñ
                const item = document.createElement("div");
                item.className = "review-item";

                const labelDiv = document.createElement("div");
                labelDiv.className = "review-label";
                labelDiv.textContent = label;

                const valueDiv = document.createElement("div");
                valueDiv.className = "review-value error-value";
                valueDiv.innerHTML = `<span class="error-icon">âš </span> ${message}`;

                item.appendChild(labelDiv);
                item.appendChild(valueDiv);
                parent.appendChild(item);
            } else {
                // ÐžÐ±Ñ‰Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°
                const errorItem = document.createElement("div");
                errorItem.className = "review-item error-item";

                const errorValue = document.createElement("div");
                errorValue.className = "error-value";
                errorValue.innerHTML = `<span class="error-icon">âš </span> ${message}`;

                errorItem.appendChild(errorValue);
                parent.appendChild(errorItem);
            }
        }

        function goToStep(step) {
            if (step >= 1 && step <= 5) {
                currentStep = step;
                formData.currentStep = currentStep;
                updateUI();
                saveFormData(false);
            }
        }

        function goToPreviousStep() {
            if (currentStep > 1) {
                currentStep--;
                formData.currentStep = currentStep;
                updateUI();
                saveFormData(false);
            }
        }

        function goToNextStep() {
            if (validateCurrentStep()) {
                if (currentStep < 5) {
                    currentStep++;
                    formData.currentStep = currentStep;

                    // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑˆÐ°Ð³Ð° Ð² Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ‹Ðµ ÑˆÐ°Ð³Ð¸, ÐµÑÐ»Ð¸ ÐµÐ³Ð¾ Ñ‚Ð°Ð¼ ÐµÑ‰Ðµ Ð½ÐµÑ‚
                    if (!formData.completedSteps.includes(currentStep - 1)) {
                        formData.completedSteps.push(currentStep - 1);
                    }

                    updateUI();
                    saveFormData(false);
                } else {
                    // ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² Ð¾Ð±Ð·Ð¾Ñ€Ðµ
                    const errorItems = document.querySelectorAll(".error-item, .error-value");

                    if (errorItems.length > 0) {
                        alert("Yuborishdan oldin barcha xatolarni tuzating.");
                    } else {
                        // ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ñ„Ð¾Ñ€Ð¼Ñ‹
                        prepareFormForSubmission();
                        submitBtn.click();
                    }
                }
            }
        }

        function validateCurrentStep() {
        if (currentStep === 1) {
            const title = document.getElementById("id_title").value.trim();
            const abstract = document.getElementById("id_abstract").value.trim();
            const startDate = document.getElementById("id_start_date").value;
            const conference = document.getElementById("id_conference") ? document.getElementById("id_conference").value : formData.details.conference;

            if (!title || !abstract || !startDate || !conference) {
                alert("{% trans 'Barcha kerakli maydonlarni toÊ»ldiring.' %}");
                return false;
            }
        } else if (currentStep === 2) {
            const hasExistingFiles = document.querySelectorAll('.existing-file-item').length > 0;
            const hasNewFiles = formData.files && formData.files.length > 0;
            if (!hasExistingFiles && !hasNewFiles) {
                alert("{% trans 'Iltimos, kamida bitta fayl yuklang.' %}");
                return false;
            }
        } else if (currentStep === 3) {
            if (!formData.contributors || formData.contributors.length === 0) {
                alert("{% trans 'Iltimos, kamida bitta muallif qoshing.' %}");
                return false;
            }
        }
        return true;
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function updateFormData() {
            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹
            if (currentStep === 1) {
                formData.details.conference = document.getElementById("id_conference") ? document.getElementById("id_conference").value : formData.details.conference;
                formData.details.title = document.getElementById("id_title").value;
                formData.details.abstract = document.getElementById("id_abstract").value;
                formData.details.keywords = document.getElementById("id_keywords").value;
                formData.details.references = document.getElementById("id_references").value;
                formData.details.startDate = document.getElementById("id_start_date").value;
                formData.details.endDate = document.getElementById("id_end_date").value;
            }

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð¾Ð²
            if (currentStep === 4) {
                formData.editors.coverLetter = document.getElementById("id_cover_letter").value;
                formData.editors.specialInstructions = document.getElementById("id_special_instructions").value;
            }
        }

        function saveFormData(showAlert = true) {
            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼
            updateFormData();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑˆÐ°Ð³Ð° Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
            formData.currentStep = currentStep;
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            formData.lastSaved = timeString;

            // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² localStorage
            localStorage.setItem("articleFormData", JSON.stringify(formData));

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
            lastSavedSpan.textContent = `Oxirgi saqlangan: ${timeString}`;

            if (showAlert) {
                alert("{% trans 'Jarayoningiz saqlandi. Davom etish uchun keyinroq bu shaklga qaytishingiz mumkin.' %}");
            }
        }

        function loadFormData() {
            const savedData = localStorage.getItem("articleFormData");
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    formData = parsedData;
                    currentStep = formData.currentStep || 1;

                    // Ð£Ð±ÐµÐ´Ð¸Ð¼ÑÑ, Ñ‡Ñ‚Ð¾ Ð¼Ð°ÑÑÐ¸Ð² Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚
                    if (!formData.contributors) {
                        formData.contributors = [];
                    }
                } catch (e) {
                    console.error("Saqlangan maÊ¼lumotlarni yuklashda xatolik yuz berdi:", e);
                }
            }
        }

        function prepareFormForSubmission() {
            // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ð¾Ð»Ñ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð²
            if (formData.contributors && formData.contributors.length > 0) {
                // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð° ÐºÐ°Ðº Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾
                const primaryAuthor = formData.contributors[0];
                
                // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ Ð¿Ð¾Ð»Ñ Ð´Ð»Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð°Ð²Ñ‚Ð¾Ñ€Ð°
                createHiddenInput("author_given_name", primaryAuthor.givenName);
                createHiddenInput("author_family_name", primaryAuthor.familyName);
                createHiddenInput("author_email", primaryAuthor.email);
                createHiddenInput("author_country", primaryAuthor.country);
                createHiddenInput("author_affiliation", primaryAuthor.affiliation);
                
                // Ð”Ð»Ñ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð² Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ JSON Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ ÐµÐ³Ð¾ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¿Ð¾Ð»Ðµ
                if (formData.contributors.length > 1) {
                    const additionalAuthors = formData.contributors.slice(1);
                    createHiddenInput("additional_authors", JSON.stringify(additionalAuthors));
                }
            }
        }

        function createHiddenInput(name, value) {
            const input = document.createElement("input");
            input.type = "hidden";
            input.name = name;
            input.value = value || "";
            articleForm.appendChild(input);
        }
    });
</script>
<script src="{% static 'js/jquery-1.11.0.min.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
<script src="{% static 'js/plugins.js' %}"></script>
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}

